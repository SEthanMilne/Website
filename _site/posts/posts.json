[
  {
    "path": "posts/2022-04-13-scraping-wikipedia-pages-a-brief-tutorial/",
    "title": "Scraping Wikipedia Tables: A Brief Tutorial",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-04-13",
    "categories": [],
    "contents": "\nThere’s a lot of information on Wikipedia. Some good, some bad.\nYou’re not supposed to cite Wikipedia as a source in papers, but if you\ninstead say “data was scraped from an online encyclopedia” I think that\nsounds official and science-y enough for most purposes.\nThis tutorial will be pretty simple. It requires one package, and one\nline of code to scrape a table from Wikipedia. I’ve also included a more\ngeneral scraping solution to capture an arbitrary number of wikipedia\ntables on TV show viewership as an example.\nThe Packages\nThere’s really only one package you need to scrape Wikipedia tables:\nhtmltab. I’ve also added tidyverse because I\nlike dplyr functions.\n\n\nlibrary(tidyverse)\nlibrary(htmltab)\n\n\n\nThe Data\nSuppose I’m interesting in scraping information on viewership of The\nBig Bang Theory. If you google “big bang theory episodes list”, you’ll\nfind a wikipedia\npage that looks a little like this:\nThe Code\nScraping tables takes a single line of code. The\nhtmltab() function uses two inputs: a link to the webpage,\nand a number marking which table you want to scrape. In this case, I\nwant to get table #2, which is a summary of Season 1 (table #1 is an\nindex of all seasons).\n\n\nlink <- \"https://en.wikipedia.org/wiki/List_of_The_Big_Bang_Theory_episodes\"\n\nhtmltab(link, 2) |>\n    glimpse()\n\n\nRows: 17\nColumns: 8\n$ No.overall               <chr> \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", …\n$ `No. inseason`           <chr> \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", …\n$ Title                    <chr> \"\\\"Pilot\\\"\", \"\\\"The Big Bran Hypoth…\n$ `Directed by`            <chr> \"James Burrows\", \"Mark Cendrowski\",…\n$ `Written by`             <chr> \"Chuck Lorre & Bill Prady\", \"Story …\n$ `Original air date`      <chr> \"September 24, 2007\", \"October 1, 2…\n$ Prod.code                <chr> \"276023\", \"3T6601\", \"3T6602\", \"3T66…\n$ `U.S. viewers(millions)` <chr> \"9.52\", \"8.58\", \"8.36\", \"8.15\", \"8.…\n\nThe Next Step\nWhat if I don’t want to scrape a single table, but multiple tables?\nHere’s one way to do it.\nThe Big Bang Theory page’s first table is an index of all seasons. I\ncan scrape that table, and then use the number of rows (seasons) in that\ntable to scrape each table for each subsequent season, and store the\nresults in a list:\n\n\nlink <- \"https://en.wikipedia.org/wiki/List_of_The_Big_Bang_Theory_episodes\"\n\n## Get list of seasons\nindex <- htmltab(link, 1)\n\n## Set up storage list\nseason <- list()\n\n## Scrape each season table\nfor (i in 1:nrow(index)){\n    season[[i]] <- htmltab(link, i + 1)\n}\n\n## Example Output\nseason[[5]] |>\n    glimpse()\n\n\nRows: 24\nColumns: 8\n$ No.overall               <chr> \"88\", \"89\", \"90\", \"91\", \"92\", \"93\",…\n$ `No. inseason`           <chr> \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", …\n$ Title                    <chr> \"\\\"The Skank Reflex Analysis\\\"\", \"\\…\n$ `Directed by`            <chr> \"Mark Cendrowski\", \"Mark Cendrowski…\n$ `Written by`             <chr> \"Story by : Eric Kaplan & Maria Fer…\n$ `Original air date`      <chr> \"September 22, 2011\", \"September 22…\n$ Prod.code                <chr> \"3X6851\", \"3X6852\", \"3X6853\", \"3X68…\n$ `U.S. viewers(millions)` <chr> \"14.30\", \"14.94\", \"14.74\", \"13.92\",…\n\nThat’s it!\nScraping doesn’t need to be scary. Start small, work your way up to\nmore complex tasks. htmltab is good for HTML tables that\nare well-structured on sites like Wikipedia, but more complex scraping\nprojects will probably require a familiarity with packages like\nrvest and httr.\n\n\n\n",
    "preview": "posts/2022-04-13-scraping-wikipedia-pages-a-brief-tutorial/wikipedia.png",
    "last_modified": "2022-04-13T18:51:40-04:00",
    "input_file": "scraping-wikipedia-pages-a-brief-tutorial.knit.md",
    "preview_width": 2244,
    "preview_height": 2048
  },
  {
    "path": "posts/2022-03-03-introducing-haikuify/",
    "title": "Introducing Haikuify",
    "description": "A new package for R to make text wrangling Quirky and Cool",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-04",
    "categories": [],
    "contents": "\nIntroduction\nI made an R package. Not a good one, but a package nonetheless. It’s called Haikuify, and can be accessed at this GitHub repo.\nThis package does exactly what the name suggests – it takes text and…. haikuifies it. That is, the package takes strings and identifies when there are haikus present.\nHaikus are well-suited for text analysis because they do not have any requirements for rhyming, which can be difficult to determine with basic text analysis tools. Instead, Haikus have only one rule: The poem must follow a 5-7-5 syllable structure. Counting syllables is easy with modern packages like Quanteda or nsyllable, so it is pretty easy to determine whether a sentence meets the criteria of a haiku.\nPackage mechanics\nThe Haikuify package contains a single function, reproduced below:\n\n\nhaikuify <- function (x) {\n    x |>\n        strsplit(\"(?<=[[:punct:]])\\\\s(?=[A-Z])\", perl = T) |>\n        unlist() |>\n        data.frame() |>\n        rename(\"Sentences\" = 1) |>\n        mutate(\n            Sentences = gsub(\"[[:punct:]]\", \"\", Sentences),\n            Sentences = tolower(Sentences),\n            Sentence_ID = row_number()\n        ) |>\n        tidytext::unnest_tokens(word, Sentences) |>\n        mutate(\n            syllables = nsyllable::nsyllable(word) |>\n                as.numeric()\n        ) |>\n        group_by(Sentence_ID) |>\n        mutate(sentence_syllables = sum(syllables)) |>\n        filter(sentence_syllables == 17) |>\n        mutate(syllable_count = cumsum(syllables)) |>\n        filter(any(syllable_count == 5)) |>\n        filter(any(syllable_count == 12)) |>\n        filter(any(syllable_count == 17)) |>\n        mutate(\n            word = ifelse(syllable_count == 5, \n                          paste(word, \"/\", sep = \" \"),\n                          word),\n            word = ifelse(syllable_count == 12, \n                          paste(word, \"/\", sep = \" \"),\n                          word)\n        ) |>\n        summarise(text = stringr::str_c(word, collapse = \" \")) |>\n        mutate(text = stringr::str_to_title(text)) |>\n        dplyr::pull(text)\n}\n\n\n\nLet’s break this down piece by piece. First, we need to split a given text string into its component sentences. The following chunk takes a string (x) and splits it whenever it finds punctuation. These split strings are output as a list, which is then unlisted and turned into a dataframe. Then, the dataframe is given sensible column names (e.g. “sentences”), and the punctuation is stripped from the string. Finally, all words are turned into lowercase using the tolower() function.\n\n\nx |>\n    strsplit(\"(?<=[[:punct:]])\\\\s(?=[A-Z])\", perl = T) |>\n        unlist() |>\n        data.frame() |>\n        rename(\"Sentences\" = \".\") |>\n        mutate(\n            Sentences = gsub(\"[[:punct:]]\", \"\", Sentences),\n            Sentences = tolower(Sentences),\n            Sentence_ID = row_number()\n        )\n\n\n\nNext, we need to figure out the number of syllables contained in each word, in each sentence. The following chunk “unnests” the words in each sentence, splitting by the spaces in the sentence and giving each word its own row in a new dataframe. Then, the quanteda function nsyllable() is applied to each individual word in its row to come up with a syllable value per word.\n\n\ntidytext::unnest_tokens(word, Sentences) |>\n    mutate(\n        syllables = quanteda::nsyllable(word, \n                                        syllable_dictionary = quanteda::data_int_syllables) |>\n            as.numeric()\n    )\n\n\n\nNow that syllables have been determined, we can identify if a sentence meets basic criteria for a haiku. The first check is whether a sentence has 17 total syllables (the sum of 5 + 7 + 5):\n\n\ngroup_by(Sentence_ID) |>\n        mutate(sentence_syllables = sum(syllables)) |>\n        filter(sentence_syllables == 17)\n\n\n\nBut not every sentence that has 17 syllables is truly a haiku. Consider the following sentence:\n\n“Antidisestablishmentarianism is a cool word eh?”\n\nWhile this sentence does have 17 syllables, the word “antidisestablishmentarianism” cannot be split across multiple lines. The solution, then, is to cumulatively sum the syllables in a given sentence, and identify when a sentence reaches a syllable count of 5, 12 (5+7), and 17 (5+7+5) respectively:\n\n\nmutate(syllable_count = cumsum(syllables)) |>\n        filter(any(syllable_count == 5)) |>\n        filter(any(syllable_count == 12)) |>\n        filter(any(syllable_count == 17))\n\n\n\nNow we need to identify the line breaks for a haiku. With our list of true haikus, we can easily append “/” to the end of the 5 and 12-syllable words to signify line breaks:\n\n\nmutate(word = ifelse(syllable_count == 5, \n                     paste(word, \"/\", sep = \" \"), \n                     word),\n            word = ifelse(syllable_count == 12, \n                          paste(word, \"/\", sep = \" \"), \n                          word)\n        )\n\n\n\nFinally, we can pull everything together and output a full haiku, complete with line breaks and all:\n\n\nsummarise(text = stringr::str_c(word, collapse = \" \")) |>\n        mutate(text = stringr::str_to_title(text)) |>\n        dplyr::pull(text)\n\n\n\nImplementation\nNow to install the package and give it a live test:\n\n\ndevtools::install_github(\"SEthanMilne/Haikuify\")\nlibrary(Haikuify)\n\n\ntext <- \"I've been wondering for a while now how we might start this project. We need to make sure that the tools are all in place to get started soon. Sound good? Let's get going.\"\n\nhaikuify(text)\n\n\n[1] \"We Need To Make Sure / That The Tools Are All In Place / To Get Started Soon\"\n\nThe use-case for Haikuify is clear: whimsical exploration of otherwise serious text data. As an example, I undertook a small project a couple years back using this package to find accidental haikus in 10-k reports from major tech firms. Here’s a haiku sourced from Microsoft’s 2018 report (with a background chart of their stock movement)\nMicrosoft Haiku\n\n\n",
    "preview": "https://youth-time.eu/wp-content/uploads/2020/06/Haiku-poetry.jpg",
    "last_modified": "2022-03-03T19:48:29-05:00",
    "input_file": {}
  },
  {
    "path": "posts/2022-03-03-beautiful-tables-with-gt/",
    "title": "How I make tables",
    "description": "Using R's Grammar of Tables (gt) package to summarize data on the 2022 Freedom Convoy",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-03",
    "categories": [],
    "contents": "\nI’ve been exploring options for generating tables in R, and have landed on the gt package. This package is to tables as ggplot is to plots – table creation is done in a reproducible manner with a syntax that should be fairly intuitive for any regular ggplot user.\nThis post uses the gt package to explore data related to the 2022 Freedom Convoy. For those unaware, in early 2022 a group of Canadian truckers started forming a convoy to protest vaccine, mask, and other covid-related mandates. They parked outside the Canadian parliament in Ottawa, and honked their horns for weeks.\nThese truckers were funded by charitable donations. Initially, these funds (all $10 million!) were funneled through GoFundMe, but the site has since frozen the campaign and told donors to request refunds.\nConvoy supported then moved to a sketchier, less secure website called GiveSendGo. In just over 24 hours, they raised nearly $9 million – almost matching the total donations sent to GoFundMe. The site was then hacked, and personal data on all donors were leaked to academics and journalists.\nI recently got access to this data for a research project, and will be documenting my general process for summarizing and presenting the data in this post.\nRequired Packages\n\n\nlibrary(tidyverse)\nlibrary(readr)\nlibrary(gt)\nlibrary(lubridate)\n\n\n\nLoad Data\nThe data I’ll be loading has already been cleaned. I’ve also added some variables related to donor anonymity, and classifications of the content of their comments.\n\n\npath <- here::here(\"_posts\", \"2022-03-03-beautiful-tables-with-gt\", \"cleanGSG.csv\")\n    \nGSG_data <- read_csv(path)\n\n\n\nTable Creation\nThe table I’ll be making will show the breakdown of donations by the anonymity of donors, and the specific campaign they donated to.\nSummarize Data\n\n\n## First, make the anonymous column a factor\nGSG_data <- GSG_data |>\n  mutate(donation_anonymous = as.factor(donation_anonymous),\n         donation_anonymous = fct_relevel(donation_anonymous, c(\n  \"Fully Public\",\n  \"First Name Public\",\n  \"Last Name Public\",\n  \"Pseudonymous\",\n  \"Anonymous\"\n)))\n\n## Then, use group_by and summarise\ndonations_table <- GSG_data |>\n  group_by(campaign, donation_anonymous) |>\n  summarise(\n    `Total Donations` = sum(donation_amount),\n    `Avg Donations` = mean(donation_amount),\n    `Total Donors` = n(),\n    `Largest Donation` = max(donation_amount)\n  ) |>\n  rename(\n    Campaign = campaign,\n    Name = donation_anonymous\n  )\n\ndonations_table\n\n\n# A tibble: 10 × 6\n# Groups:   Campaign [2]\n   Campaign    Name    `Total Donation… `Avg Donations` `Total Donors`\n   <chr>       <fct>              <dbl>           <dbl>          <int>\n 1 Adopt a Tr… Fully …           69844.            67.0           1042\n 2 Adopt a Tr… First …           47485.            51.4            924\n 3 Adopt a Tr… Last N…           35934.            70.5            510\n 4 Adopt a Tr… Pseudo…           69616.            54.7           1273\n 5 Adopt a Tr… Anonym…          201879.            54.3           3720\n 6 Freedom Co… Fully …         1295743            106.           12244\n 7 Freedom Co… First …          747376             76.7           9740\n 8 Freedom Co… Last N…          658672            105.            6265\n 9 Freedom Co… Pseudo…         1609304            100.           16047\n10 Freedom Co… Anonym…         4103344.            84.6          48505\n# … with 1 more variable: Largest Donation <dbl>\n\nNow we have a big, ugly dataframe to work with. From here, we can start using the gt package to pretty this up.\nCreate a gt object\n\n\ndonations_table <- gt(donations_table)\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#hmxzkzorcu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hmxzkzorcu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hmxzkzorcu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hmxzkzorcu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hmxzkzorcu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hmxzkzorcu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hmxzkzorcu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hmxzkzorcu .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hmxzkzorcu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hmxzkzorcu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hmxzkzorcu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hmxzkzorcu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hmxzkzorcu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#hmxzkzorcu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmxzkzorcu .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmxzkzorcu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hmxzkzorcu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hmxzkzorcu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hmxzkzorcu .gt_left {\n  text-align: left;\n}\n\n#hmxzkzorcu .gt_center {\n  text-align: center;\n}\n\n#hmxzkzorcu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hmxzkzorcu .gt_font_normal {\n  font-weight: normal;\n}\n\n#hmxzkzorcu .gt_font_bold {\n  font-weight: bold;\n}\n\n#hmxzkzorcu .gt_font_italic {\n  font-style: italic;\n}\n\n#hmxzkzorcu .gt_super {\n  font-size: 65%;\n}\n\n#hmxzkzorcu .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations\n      Avg Donations\n      Total Donors\n      Largest Donation\n    Adopt a Trucker\n    Fully Public\n69843.81\n67.02861\n1042\n6186.1214First Name Public\n47485.45\n51.39118\n924\n919.5877Last Name Public\n35934.49\n70.45979\n510\n3129.6826Pseudonymous\n69615.62\n54.68627\n1273\n3069.2359Anonymous\n201879.43\n54.26866\n3720\n6144.5845Freedom Convoy 2022\n    Fully Public\n1295743.00\n105.82677\n12244\n90000.0000First Name Public\n747376.00\n76.73265\n9740\n2500.0000Last Name Public\n658672.00\n105.13520\n6265\n25000.0000Pseudonymous\n1609304.00\n100.28691\n16047\n215000.0000Anonymous\n4103344.50\n84.59632\n48505\n75000.0000\n\nThis is already looking worlds better – we have some nice dividing lines, and the donations are grouped by campaign. Next is making the numbers look better.\nFormat values\nThankfully, the gt package gives us some good tools for formatting values. We don’t need to see that there were 100.00000 donors when we could just say 100, and currency values need to be turned into dollar amounts.\n\n\ndonations_table <- donations_table |>\n  fmt_currency(\n    columns = c(`Avg Donations`, \n                `Largest Donation`, \n                `Total Donations`),\n    decimals = 0 #Round to nearest $1\n  ) |>\n  fmt_number(\n    columns = c(`Total Donors`),\n    decimals = 0 #Remove decimals\n  )\n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#lttjojjiml .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lttjojjiml .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lttjojjiml .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lttjojjiml .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lttjojjiml .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lttjojjiml .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lttjojjiml .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lttjojjiml .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lttjojjiml .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lttjojjiml .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lttjojjiml .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lttjojjiml .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lttjojjiml .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#lttjojjiml .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lttjojjiml .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lttjojjiml .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lttjojjiml .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#lttjojjiml .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#lttjojjiml .gt_left {\n  text-align: left;\n}\n\n#lttjojjiml .gt_center {\n  text-align: center;\n}\n\n#lttjojjiml .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lttjojjiml .gt_font_normal {\n  font-weight: normal;\n}\n\n#lttjojjiml .gt_font_bold {\n  font-weight: bold;\n}\n\n#lttjojjiml .gt_font_italic {\n  font-style: italic;\n}\n\n#lttjojjiml .gt_super {\n  font-size: 65%;\n}\n\n#lttjojjiml .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations\n      Avg Donations\n      Total Donors\n      Largest Donation\n    Adopt a Trucker\n    Fully Public\n$69,844\n$67\n1,042\n$6,186First Name Public\n$47,485\n$51\n924\n$920Last Name Public\n$35,934\n$70\n510\n$3,130Pseudonymous\n$69,616\n$55\n1,273\n$3,069Anonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    Fully Public\n$1,295,743\n$106\n12,244\n$90,000First Name Public\n$747,376\n$77\n9,740\n$2,500Last Name Public\n$658,672\n$105\n6,265\n$25,000Pseudonymous\n$1,609,304\n$100\n16,047\n$215,000Anonymous\n$4,103,344\n$85\n48,505\n$75,000\n\nFootnotes\nBecause we rounded currency values, and its ambiguous which currency the dollar amounts are in, we need to make a note of it. For this, we’ll use gt’s tab_footnote() function, specifying the location of the footnotes.\n\n\ndonations_table <- donations_table |>\n    tab_footnote(\n        footnote = md(\"*All currency values (USD) rounded to the nearest dollar*\"),\n        locations = cells_column_labels(\n            columns = c(`Avg Donations`,\n                        `Largest Donation`,\n                        `Total Donations`)\n        )\n    ) \n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#wkbdlrsskd .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wkbdlrsskd .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wkbdlrsskd .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wkbdlrsskd .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wkbdlrsskd .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wkbdlrsskd .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wkbdlrsskd .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wkbdlrsskd .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wkbdlrsskd .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wkbdlrsskd .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wkbdlrsskd .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wkbdlrsskd .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wkbdlrsskd .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#wkbdlrsskd .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wkbdlrsskd .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wkbdlrsskd .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wkbdlrsskd .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#wkbdlrsskd .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#wkbdlrsskd .gt_left {\n  text-align: left;\n}\n\n#wkbdlrsskd .gt_center {\n  text-align: center;\n}\n\n#wkbdlrsskd .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wkbdlrsskd .gt_font_normal {\n  font-weight: normal;\n}\n\n#wkbdlrsskd .gt_font_bold {\n  font-weight: bold;\n}\n\n#wkbdlrsskd .gt_font_italic {\n  font-style: italic;\n}\n\n#wkbdlrsskd .gt_super {\n  font-size: 65%;\n}\n\n#wkbdlrsskd .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations1\n      Avg Donations1\n      Total Donors\n      Largest Donation1\n    Adopt a Trucker\n    Fully Public\n$69,844\n$67\n1,042\n$6,186First Name Public\n$47,485\n$51\n924\n$920Last Name Public\n$35,934\n$70\n510\n$3,130Pseudonymous\n$69,616\n$55\n1,273\n$3,069Anonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    Fully Public\n$1,295,743\n$106\n12,244\n$90,000First Name Public\n$747,376\n$77\n9,740\n$2,500Last Name Public\n$658,672\n$105\n6,265\n$25,000Pseudonymous\n$1,609,304\n$100\n16,047\n$215,000Anonymous\n$4,103,344\n$85\n48,505\n$75,000\n        \n          1\n          All currency values (USD) rounded to the nearest dollar\n          \n      \n    \n\nAlign columns\nNext, let’s align our columns. The value columns will be centered, and the anonymity categories will be right-justified.\n\n\ndonations_table <- donations_table |>\n    cols_align(\n        align = \"center\",\n        columns = c(\n            `Avg Donations`,\n            `Largest Donation`,\n            `Total Donations`,\n            `Total Donors`\n        )\n    ) |>\n    cols_align(align = \"right\",\n               columns = Name)\n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#hburxfsjqd .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hburxfsjqd .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hburxfsjqd .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hburxfsjqd .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hburxfsjqd .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hburxfsjqd .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hburxfsjqd .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hburxfsjqd .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hburxfsjqd .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hburxfsjqd .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hburxfsjqd .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hburxfsjqd .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hburxfsjqd .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#hburxfsjqd .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hburxfsjqd .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hburxfsjqd .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hburxfsjqd .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hburxfsjqd .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hburxfsjqd .gt_left {\n  text-align: left;\n}\n\n#hburxfsjqd .gt_center {\n  text-align: center;\n}\n\n#hburxfsjqd .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hburxfsjqd .gt_font_normal {\n  font-weight: normal;\n}\n\n#hburxfsjqd .gt_font_bold {\n  font-weight: bold;\n}\n\n#hburxfsjqd .gt_font_italic {\n  font-style: italic;\n}\n\n#hburxfsjqd .gt_super {\n  font-size: 65%;\n}\n\n#hburxfsjqd .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations1\n      Avg Donations1\n      Total Donors\n      Largest Donation1\n    Adopt a Trucker\n    Fully Public\n$69,844\n$67\n1,042\n$6,186First Name Public\n$47,485\n$51\n924\n$920Last Name Public\n$35,934\n$70\n510\n$3,130Pseudonymous\n$69,616\n$55\n1,273\n$3,069Anonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    Fully Public\n$1,295,743\n$106\n12,244\n$90,000First Name Public\n$747,376\n$77\n9,740\n$2,500Last Name Public\n$658,672\n$105\n6,265\n$25,000Pseudonymous\n$1,609,304\n$100\n16,047\n$215,000Anonymous\n$4,103,344\n$85\n48,505\n$75,000\n        \n          1\n          All currency values (USD) rounded to the nearest dollar\n          \n      \n    \n\nGrand summary rows\nNow that our columns are nicely formatted, we can make a grand summary row. We’ll want to see what the total number of donations and donors are.\n\n\ndonations_table <- donations_table |>\n  grand_summary_rows(\n    columns = c(`Total Donors`),\n    fns = c(\n      Total = ~sum(.) #applies sum func to column\n    ),\n    decimals = 0\n  ) |>\n  grand_summary_rows(\n    columns = c(`Total Donations`),\n    fns = c(\n      Total = ~sum(.) #applies sum func to column\n    ),\n    formatter = fmt_currency,\n    decimals = 0 #rounds to nearest $1\n  )\n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#ydxlpkhqox .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ydxlpkhqox .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ydxlpkhqox .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ydxlpkhqox .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ydxlpkhqox .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ydxlpkhqox .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ydxlpkhqox .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ydxlpkhqox .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ydxlpkhqox .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ydxlpkhqox .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ydxlpkhqox .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ydxlpkhqox .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ydxlpkhqox .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#ydxlpkhqox .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ydxlpkhqox .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ydxlpkhqox .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ydxlpkhqox .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#ydxlpkhqox .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#ydxlpkhqox .gt_left {\n  text-align: left;\n}\n\n#ydxlpkhqox .gt_center {\n  text-align: center;\n}\n\n#ydxlpkhqox .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ydxlpkhqox .gt_font_normal {\n  font-weight: normal;\n}\n\n#ydxlpkhqox .gt_font_bold {\n  font-weight: bold;\n}\n\n#ydxlpkhqox .gt_font_italic {\n  font-style: italic;\n}\n\n#ydxlpkhqox .gt_super {\n  font-size: 65%;\n}\n\n#ydxlpkhqox .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\n\n      Name\n      Total Donations1\n      Avg Donations1\n      Total Donors\n      Largest Donation1\n    Adopt a Trucker\n    \nFully Public\n$69,844\n$67\n1,042\n$6,186\nFirst Name Public\n$47,485\n$51\n924\n$920\nLast Name Public\n$35,934\n$70\n510\n$3,130\nPseudonymous\n$69,616\n$55\n1,273\n$3,069\nAnonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    \nFully Public\n$1,295,743\n$106\n12,244\n$90,000\nFirst Name Public\n$747,376\n$77\n9,740\n$2,500\nLast Name Public\n$658,672\n$105\n6,265\n$25,000\nPseudonymous\n$1,609,304\n$100\n16,047\n$215,000\nAnonymous\n$4,103,344\n$85\n48,505\n$75,000Total\n      —\n      $8,839,198\n      —\n      100,270\n      —\n    \n        \n          1\n          All currency values (USD) rounded to the nearest dollar\n          \n      \n    \n\nHeader\nNow we can get started on a header. For this, I’ll be including some extra information about when the most recent and earliest donations were. I’ll also make the campaign groups pop more by bolding them.\n\n\noldest_donation <- min(GSG_data$relative_date)\n\nyoungest_donation <- max(GSG_data$relative_date)\n\ntime_interval <- paste(\n    month(oldest_donation, label = TRUE, abbr = FALSE),\n    \" \", day(oldest_donation),\"th \",hour(oldest_donation),\n    \":\", minute(oldest_donation), \" — \",\n    month(youngest_donation, label = TRUE, abbr = FALSE),\n    \" \",day(youngest_donation),\"th \", hour(youngest_donation),\n    \":\",minute(youngest_donation),sep = \"\"\n)\n\ndonations_table <- donations_table |>\n  tab_header(\n    title = md(\"**GiveSendGo Convoy Donations**\"),\n    subtitle = time_interval \n  ) |>\n    tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_row_groups()\n  )\n\n\n\n\n\n\nConclusion\nAnd with that, we have a beautiful, reproducible table done entirely in R.\n\n\n\n",
    "preview": "posts/2022-03-03-beautiful-tables-with-gt/beautiful-tables-with-gt_files/figure-html5/unnamed-chunk-10-1.png",
    "last_modified": "2022-03-03T19:02:25-05:00",
    "input_file": {},
    "preview_width": 1369,
    "preview_height": 1217
  },
  {
    "path": "posts/2022-03-03-jcr-p-values/",
    "title": "JCR P-Values",
    "description": "A short exercise in extracting p values from academic papers.",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-03",
    "categories": [],
    "contents": "\nRequired Packages\n\n\nlibrary(pdftools)\nlibrary(tidyverse)\nlibrary(ggthemes)\nlibrary(ggtext)\nlibrary(ggpubr)\n\n\n\nExtract P Values\nThe code chunk below extracts the P values from papers in the following way:\nGet the names of all papers in a folder containing them\nLoop through each paper name and use the pdftools package to extract their raw text\nDo some basic cleaning (e.g. getting rid of “\\n”, which denote paragraph breaks)\nExtract all strings of text that are preceded by \"P >\", \"P <\", \"P =\", and which end in a closed bracket \")\"\nOutput a data frame with 2 columns: P values and Paper Name\n\n\nfiles <- list.files(\"PDFs\")\n\nResults <- data.frame(matrix(ncol = 2, nrow = 0))\nnames(Results) <- c(\"P_Value\", \"Paper\")\n\nfor (i in 1:length(files)) {\n  name <- files[i]\n  \n  text <-\n    pdf_text(\n        here::here(\"_posts\", \"2022-03-03-jcr-p-values\", \"PDFs\", name)\n    )\n  text <- gsub(\"\\n\", \"\", text)\n  text <- gsub(\"  \", \"\", text)\n  \n  values <-\n    unlist(str_extract_all(text, 'p\\\\s?[=<>]\\\\s?\\\\.\\\\d{1,4}')) |>\n    as.data.frame() |>\n    mutate(Paper = name)\n  \n  if (is_empty(values)) {\n    next\n  } else{\n    names(values) <- c(\"P_Value\", \"Paper\")\n    \n    Results <- rbind(values, Results)\n  }\n}\n\n\n\nCleaning\nNow that I have every P value, I need to extract the actual number. This is moderately challenging - P values are often reported without the leading 0 (e.g. p = .07), and a p value that is reported as greater than 0.05 is different from one that is equal to or less than, and those differences need to be recorded somewhere for any future work I may do.\nIn summary, what the below code does is:\nExtract the “raw numeric value” from each reported p value string\nReplace the prior “p [<=>]” with a “0” instead\nConvert this column to numeric\n\n\nCleaned_Results <- Results |>\n  mutate(\n    Raw_Value = P_Value,\n    Raw_Value = gsub(\"p < \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p = \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p > \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p >\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p =\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p <\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p< \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p= \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p> \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p<\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p=\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p>\", \"0\", Raw_Value)\n  ) |>\n  mutate(Operator = str_extract(P_Value, \"[=<>]\"))\n\nCleaned_Results$Raw_Value <- as.numeric(Cleaned_Results$Raw_Value)\n\n\n\nPlotting\nFinally, I wanted to plot the raw p values I’ve found. There’s little analytic code here - mostly just ggplot aesthetic wrangling. I used the {ggthemes} package for R to get the theme_fivethirtyeight function which gives me a lot of aesthetic power, for lack of a better term.\nI’ve added X axis breaks at the standard p value thresholds - 0.1, 0.05, 0.01, 0.001. We should expect that there is significant clustering around these thresholds, as most researchers seem to report inequalities (p < x) rather than exact values.\nFinally, p values aren’t exactly linear in their distribution, so everything is put on a log scale for easier interpretation.\n\n\nggplot(Cleaned_Results, aes(x = Raw_Value)) +\n    geom_histogram(bins = 50, fill = \"black\") +\n    scale_x_log10(\n        breaks = c(0.0001, 0.001, 0.01, 0.05, 0.1, 1),\n        labels = c(\".0001\", \".001\", \".01\", \".05\", \".1\", \"1\")\n    ) +\n    theme_pubclean() +\n    theme(\n        axis.title.x = element_text(),\n        axis.title.y = element_text(),\n        plot.title = element_markdown(),\n        plot.background = element_rect(\n            colour = \"black\",\n            fill = NA,\n            size = 2\n        )\n    ) +\n    labs(\n        title = \"<span style = 'color: #ed713a;'>Distribution of P Values<\/span>\",\n        subtitle = \"Appearing in JCR, 2019-2020 editions\",\n        x = \"P Values\",\n        y = \"Count\"\n    )\n\n\n\n\n\n\n\n",
    "preview": "posts/2022-03-03-jcr-p-values/jcr-p-values_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-03-03T11:00:56-05:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome!",
    "description": "Welcome to my new blog!",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-02",
    "categories": [],
    "contents": "\nWelcome to my new blog!\n\n\n\n",
    "preview": {},
    "last_modified": "2022-03-02T22:18:58-05:00",
    "input_file": {}
  }
]
