[
  {
    "path": "posts/2022-03-03-jcr-p-values/",
    "title": "JCR P-Values",
    "description": "A short exercise in extracting p values from academic papers.",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-03",
    "categories": [],
    "contents": "\nRequired Packages\n\n\nlibrary(pdftools)\nlibrary(tidyverse)\n\n\n\nExtract P Values\nThe code chunk below extracts the P values from papers in the following way:\nGet the names of all papers in a folder containing them\nLoop through each paper name and use the pdftools package to extract their raw text\nDo some basic cleaning (e.g. getting rid of “\\n”, which denote paragraph breaks)\nExtract all strings of text that are preceded by \"P >\", \"P <\", \"P =\", and which end in a closed bracket \")\"\nOutput a data frame with 2 columns: P values and Paper Name\n\n\nfiles <- list.files(\"PDFs\")\n\nResults <- data.frame(matrix(ncol = 2, nrow = 0))\nnames(Results) <- c(\"P_Value\", \"Paper\")\n\nfor (i in 1:length(files)) {\n  name <- files[i]\n  \n  text <-\n    pdf_text(\n        here::here(\"_posts\", \"2022-03-03-jcr-p-values\", \"PDFs\", name)\n    )\n  text <- gsub(\"\\n\", \"\", text)\n  text <- gsub(\"  \", \"\", text)\n  \n  values <-\n    unlist(str_extract_all(text, 'p\\\\s?[=<>]\\\\s?\\\\.\\\\d{1,4}')) |>\n    as.data.frame() |>\n    mutate(Paper = name)\n  \n  if (is_empty(values)) {\n    next\n  } else{\n    names(values) <- c(\"P_Value\", \"Paper\")\n    \n    Results <- rbind(values, Results)\n  }\n}\n\n\n\nCleaning\nNow that I have every P value, I need to extract the actual number. This is moderately challenging - P values are often reported without the leading 0 (e.g. p = .07), and a p value that is reported as greater than 0.05 is different from one that is equal to or less than, and those differences need to be recorded somewhere for any future work I may do.\nIn summary, what the below code does is:\nExtract the “raw numeric value” from each reported p value string\nReplace the prior “p [<=>]” with a “0” instead\nConvert this column to numeric\n\n\nCleaned_Results <- Results |>\n  mutate(\n    Raw_Value = P_Value,\n    Raw_Value = gsub(\"p < \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p = \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p > \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p >\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p =\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p <\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p< \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p= \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p> \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p<\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p=\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p>\", \"0\", Raw_Value)\n  ) |>\n  mutate(Operator = str_extract(P_Value, \"[=<>]\"))\n\nCleaned_Results$Raw_Value <- as.numeric(Cleaned_Results$Raw_Value)\n\n\n\nPlotting\nFinally, I wanted to plot the raw p values I’ve found. There’s little analytic code here - mostly just ggplot aesthetic wrangling. I used the {ggthemes} package for R to get the theme_fivethirtyeight function which gives me a lot of aesthetic power, for lack of a better term.\nI’ve added X axis breaks at the standard p value thresholds - 0.1, 0.05, 0.01, 0.001. We should expect that there is significant clustering around these thresholds, as most researchers seem to report inequalities (p < x) rather than exact values.\nFinally, p values aren’t exactly linear in their distribution, so everything is put on a log scale for easier interpretation.\n\n\nlibrary(ggthemes)\nlibrary(ggtext)\n\nggplot(Cleaned_Results, aes(x = Raw_Value)) +\n  geom_histogram(bins = 50) +\n  scale_x_log10(breaks = c(0.0001, 0.001, 0.01, 0.05, 0.1, 1),\n                labels = c(\".0001\", \".001\", \".01\", \".05\", \".1\", \"1\")) +\n  theme_fivethirtyeight() +\n  theme(\n    axis.title.x = element_text(),\n    axis.title.y = element_text(),\n    plot.title = element_markdown()\n  ) +\n  labs(\n    title = \"<span style = 'color: #ed713a;'>Distribution of P Values<\/span>\",\n    subtitle = \"Appearing in JCR, 2019-2020 editions\",\n    x = \"P Values\",\n    y = \"Count\",\n    caption = \"Source: @SEthanMilne \\n Ivey Business School\"\n  )\n\n\n\n\n\n\n\n",
    "preview": "posts/2022-03-03-jcr-p-values/jcr-p-values_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-03-03T10:34:58-05:00",
    "input_file": "jcr-p-values.knit.md",
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome!",
    "description": "Welcome to my new blog!",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-02",
    "categories": [],
    "contents": "\nWelcome to my new blog!\n\n\n\n",
    "preview": {},
    "last_modified": "2022-03-02T22:18:58-05:00",
    "input_file": {}
  }
]
