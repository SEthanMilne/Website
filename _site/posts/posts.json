[
  {
    "path": "posts/2022-03-03-beautiful-tables-with-gt/",
    "title": "How I make tables",
    "description": "Using R's Grammar of Tables (gt) package to summarize data on the 2022 Freedom Convoy",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-03",
    "categories": [],
    "contents": "\nI’ve been exploring options for generating tables in R, and have landed on the gt package. This package is to tables as ggplot is to plots – table creation is done in a reproducible manner with a syntax that should be fairly intuitive for any regular ggplot user.\nThis post uses the gt package to explore data related to the 2022 Freedom Convoy. For those unaware, in early 2022 a group of Canadian truckers started forming a convoy to protest vaccine, mask, and other covid-related mandates. They parked outside the Canadian parliament in Ottawa, and honked their horns for weeks.\nThese truckers were funded by charitable donations. Initially, these funds (all $10 million!) were funneled through GoFundMe, but the site has since frozen the campaign and told donors to request refunds.\nConvoy supported then moved to a sketchier, less secure website called GiveSendGo. In just over 24 hours, they raised nearly $9 million – almost matching the total donations sent to GoFundMe. The site was then hacked, and personal data on all donors were leaked to academics and journalists.\nI recently got access to this data for a research project, and will be documenting my general process for summarizing and presenting the data in this post.\nRequired Packages\n\n\nlibrary(tidyverse)\nlibrary(readr)\nlibrary(gt)\nlibrary(lubridate)\n\n\n\nLoad Data\nThe data I’ll be loading has already been cleaned. I’ve also added some variables related to donor anonymity, and classifications of the content of their comments.\n\n\npath <- here::here(\"_posts\", \"2022-03-03-beautiful-tables-with-gt\", \"cleanGSG.csv\")\n    \nGSG_data <- read_csv(path)\n\n\n\nTable Creation\nThe table I’ll be making will show the breakdown of donations by the anonymity of donors, and the specific campaign they donated to.\nSummarize Data\n\n\n## First, make the anonymous column a factor\nGSG_data <- GSG_data |>\n  mutate(donation_anonymous = as.factor(donation_anonymous),\n         donation_anonymous = fct_relevel(donation_anonymous, c(\n  \"Fully Public\",\n  \"First Name Public\",\n  \"Last Name Public\",\n  \"Pseudonymous\",\n  \"Anonymous\"\n)))\n\n## Then, use group_by and summarise\ndonations_table <- GSG_data |>\n  group_by(campaign, donation_anonymous) |>\n  summarise(\n    `Total Donations` = sum(donation_amount),\n    `Avg Donations` = mean(donation_amount),\n    `Total Donors` = n(),\n    `Largest Donation` = max(donation_amount)\n  ) |>\n  rename(\n    Campaign = campaign,\n    Name = donation_anonymous\n  )\n\ndonations_table\n\n\n# A tibble: 10 × 6\n# Groups:   Campaign [2]\n   Campaign    Name    `Total Donation… `Avg Donations` `Total Donors`\n   <chr>       <fct>              <dbl>           <dbl>          <int>\n 1 Adopt a Tr… Fully …           69844.            67.0           1042\n 2 Adopt a Tr… First …           47485.            51.4            924\n 3 Adopt a Tr… Last N…           35934.            70.5            510\n 4 Adopt a Tr… Pseudo…           69616.            54.7           1273\n 5 Adopt a Tr… Anonym…          201879.            54.3           3720\n 6 Freedom Co… Fully …         1295743            106.           12244\n 7 Freedom Co… First …          747376             76.7           9740\n 8 Freedom Co… Last N…          658672            105.            6265\n 9 Freedom Co… Pseudo…         1609304            100.           16047\n10 Freedom Co… Anonym…         4103344.            84.6          48505\n# … with 1 more variable: Largest Donation <dbl>\n\nNow we have a big, ugly dataframe to work with. From here, we can start using the gt package to pretty this up.\nCreate a gt object\n\n\ndonations_table <- gt(donations_table)\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#hmxzkzorcu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hmxzkzorcu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hmxzkzorcu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hmxzkzorcu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hmxzkzorcu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hmxzkzorcu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hmxzkzorcu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hmxzkzorcu .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hmxzkzorcu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hmxzkzorcu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hmxzkzorcu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hmxzkzorcu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hmxzkzorcu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#hmxzkzorcu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmxzkzorcu .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmxzkzorcu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hmxzkzorcu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hmxzkzorcu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hmxzkzorcu .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hmxzkzorcu .gt_left {\n  text-align: left;\n}\n\n#hmxzkzorcu .gt_center {\n  text-align: center;\n}\n\n#hmxzkzorcu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hmxzkzorcu .gt_font_normal {\n  font-weight: normal;\n}\n\n#hmxzkzorcu .gt_font_bold {\n  font-weight: bold;\n}\n\n#hmxzkzorcu .gt_font_italic {\n  font-style: italic;\n}\n\n#hmxzkzorcu .gt_super {\n  font-size: 65%;\n}\n\n#hmxzkzorcu .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations\n      Avg Donations\n      Total Donors\n      Largest Donation\n    Adopt a Trucker\n    Fully Public\n69843.81\n67.02861\n1042\n6186.1214First Name Public\n47485.45\n51.39118\n924\n919.5877Last Name Public\n35934.49\n70.45979\n510\n3129.6826Pseudonymous\n69615.62\n54.68627\n1273\n3069.2359Anonymous\n201879.43\n54.26866\n3720\n6144.5845Freedom Convoy 2022\n    Fully Public\n1295743.00\n105.82677\n12244\n90000.0000First Name Public\n747376.00\n76.73265\n9740\n2500.0000Last Name Public\n658672.00\n105.13520\n6265\n25000.0000Pseudonymous\n1609304.00\n100.28691\n16047\n215000.0000Anonymous\n4103344.50\n84.59632\n48505\n75000.0000\n\nThis is already looking worlds better – we have some nice dividing lines, and the donations are grouped by campaign. Next is making the numbers look better.\nFormat values\nThankfully, the gt package gives us some good tools for formatting values. We don’t need to see that there were 100.00000 donors when we could just say 100, and currency values need to be turned into dollar amounts.\n\n\ndonations_table <- donations_table |>\n  fmt_currency(\n    columns = c(`Avg Donations`, \n                `Largest Donation`, \n                `Total Donations`),\n    decimals = 0 #Round to nearest $1\n  ) |>\n  fmt_number(\n    columns = c(`Total Donors`),\n    decimals = 0 #Remove decimals\n  )\n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#lttjojjiml .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#lttjojjiml .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#lttjojjiml .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#lttjojjiml .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#lttjojjiml .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#lttjojjiml .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#lttjojjiml .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#lttjojjiml .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lttjojjiml .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#lttjojjiml .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#lttjojjiml .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#lttjojjiml .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#lttjojjiml .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#lttjojjiml .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lttjojjiml .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#lttjojjiml .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#lttjojjiml .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#lttjojjiml .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#lttjojjiml .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#lttjojjiml .gt_left {\n  text-align: left;\n}\n\n#lttjojjiml .gt_center {\n  text-align: center;\n}\n\n#lttjojjiml .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#lttjojjiml .gt_font_normal {\n  font-weight: normal;\n}\n\n#lttjojjiml .gt_font_bold {\n  font-weight: bold;\n}\n\n#lttjojjiml .gt_font_italic {\n  font-style: italic;\n}\n\n#lttjojjiml .gt_super {\n  font-size: 65%;\n}\n\n#lttjojjiml .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations\n      Avg Donations\n      Total Donors\n      Largest Donation\n    Adopt a Trucker\n    Fully Public\n$69,844\n$67\n1,042\n$6,186First Name Public\n$47,485\n$51\n924\n$920Last Name Public\n$35,934\n$70\n510\n$3,130Pseudonymous\n$69,616\n$55\n1,273\n$3,069Anonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    Fully Public\n$1,295,743\n$106\n12,244\n$90,000First Name Public\n$747,376\n$77\n9,740\n$2,500Last Name Public\n$658,672\n$105\n6,265\n$25,000Pseudonymous\n$1,609,304\n$100\n16,047\n$215,000Anonymous\n$4,103,344\n$85\n48,505\n$75,000\n\nFootnotes\nBecause we rounded currency values, and its ambiguous which currency the dollar amounts are in, we need to make a note of it. For this, we’ll use gt’s tab_footnote() function, specifying the location of the footnotes.\n\n\ndonations_table <- donations_table |>\n    tab_footnote(\n        footnote = md(\"*All currency values (USD) rounded to the nearest dollar*\"),\n        locations = cells_column_labels(\n            columns = c(`Avg Donations`,\n                        `Largest Donation`,\n                        `Total Donations`)\n        )\n    ) \n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#wkbdlrsskd .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wkbdlrsskd .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wkbdlrsskd .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wkbdlrsskd .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wkbdlrsskd .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wkbdlrsskd .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wkbdlrsskd .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wkbdlrsskd .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wkbdlrsskd .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wkbdlrsskd .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wkbdlrsskd .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wkbdlrsskd .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wkbdlrsskd .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#wkbdlrsskd .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wkbdlrsskd .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wkbdlrsskd .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wkbdlrsskd .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#wkbdlrsskd .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wkbdlrsskd .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#wkbdlrsskd .gt_left {\n  text-align: left;\n}\n\n#wkbdlrsskd .gt_center {\n  text-align: center;\n}\n\n#wkbdlrsskd .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wkbdlrsskd .gt_font_normal {\n  font-weight: normal;\n}\n\n#wkbdlrsskd .gt_font_bold {\n  font-weight: bold;\n}\n\n#wkbdlrsskd .gt_font_italic {\n  font-style: italic;\n}\n\n#wkbdlrsskd .gt_super {\n  font-size: 65%;\n}\n\n#wkbdlrsskd .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations1\n      Avg Donations1\n      Total Donors\n      Largest Donation1\n    Adopt a Trucker\n    Fully Public\n$69,844\n$67\n1,042\n$6,186First Name Public\n$47,485\n$51\n924\n$920Last Name Public\n$35,934\n$70\n510\n$3,130Pseudonymous\n$69,616\n$55\n1,273\n$3,069Anonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    Fully Public\n$1,295,743\n$106\n12,244\n$90,000First Name Public\n$747,376\n$77\n9,740\n$2,500Last Name Public\n$658,672\n$105\n6,265\n$25,000Pseudonymous\n$1,609,304\n$100\n16,047\n$215,000Anonymous\n$4,103,344\n$85\n48,505\n$75,000\n        \n          1\n          All currency values (USD) rounded to the nearest dollar\n          \n      \n    \n\nAlign columns\nNext, let’s align our columns. The value columns will be centered, and the anonymity categories will be right-justified.\n\n\ndonations_table <- donations_table |>\n    cols_align(\n        align = \"center\",\n        columns = c(\n            `Avg Donations`,\n            `Largest Donation`,\n            `Total Donations`,\n            `Total Donors`\n        )\n    ) |>\n    cols_align(align = \"right\",\n               columns = Name)\n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#hburxfsjqd .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hburxfsjqd .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hburxfsjqd .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hburxfsjqd .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hburxfsjqd .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hburxfsjqd .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hburxfsjqd .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hburxfsjqd .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hburxfsjqd .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hburxfsjqd .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hburxfsjqd .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hburxfsjqd .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hburxfsjqd .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#hburxfsjqd .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hburxfsjqd .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hburxfsjqd .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hburxfsjqd .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hburxfsjqd .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hburxfsjqd .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#hburxfsjqd .gt_left {\n  text-align: left;\n}\n\n#hburxfsjqd .gt_center {\n  text-align: center;\n}\n\n#hburxfsjqd .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hburxfsjqd .gt_font_normal {\n  font-weight: normal;\n}\n\n#hburxfsjqd .gt_font_bold {\n  font-weight: bold;\n}\n\n#hburxfsjqd .gt_font_italic {\n  font-style: italic;\n}\n\n#hburxfsjqd .gt_super {\n  font-size: 65%;\n}\n\n#hburxfsjqd .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\nName\n      Total Donations1\n      Avg Donations1\n      Total Donors\n      Largest Donation1\n    Adopt a Trucker\n    Fully Public\n$69,844\n$67\n1,042\n$6,186First Name Public\n$47,485\n$51\n924\n$920Last Name Public\n$35,934\n$70\n510\n$3,130Pseudonymous\n$69,616\n$55\n1,273\n$3,069Anonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    Fully Public\n$1,295,743\n$106\n12,244\n$90,000First Name Public\n$747,376\n$77\n9,740\n$2,500Last Name Public\n$658,672\n$105\n6,265\n$25,000Pseudonymous\n$1,609,304\n$100\n16,047\n$215,000Anonymous\n$4,103,344\n$85\n48,505\n$75,000\n        \n          1\n          All currency values (USD) rounded to the nearest dollar\n          \n      \n    \n\nGrand summary rows\nNow that our columns are nicely formatted, we can make a grand summary row. We’ll want to see what the total number of donations and donors are.\n\n\ndonations_table <- donations_table |>\n  grand_summary_rows(\n    columns = c(`Total Donors`),\n    fns = c(\n      Total = ~sum(.) #applies sum func to column\n    ),\n    decimals = 0\n  ) |>\n  grand_summary_rows(\n    columns = c(`Total Donations`),\n    fns = c(\n      Total = ~sum(.) #applies sum func to column\n    ),\n    formatter = fmt_currency,\n    decimals = 0 #rounds to nearest $1\n  )\n\ndonations_table\n\n\n\nhtml {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#ydxlpkhqox .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ydxlpkhqox .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ydxlpkhqox .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ydxlpkhqox .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ydxlpkhqox .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ydxlpkhqox .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ydxlpkhqox .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ydxlpkhqox .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ydxlpkhqox .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ydxlpkhqox .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ydxlpkhqox .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ydxlpkhqox .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ydxlpkhqox .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#ydxlpkhqox .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ydxlpkhqox .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ydxlpkhqox .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ydxlpkhqox .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#ydxlpkhqox .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ydxlpkhqox .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#ydxlpkhqox .gt_left {\n  text-align: left;\n}\n\n#ydxlpkhqox .gt_center {\n  text-align: center;\n}\n\n#ydxlpkhqox .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ydxlpkhqox .gt_font_normal {\n  font-weight: normal;\n}\n\n#ydxlpkhqox .gt_font_bold {\n  font-weight: bold;\n}\n\n#ydxlpkhqox .gt_font_italic {\n  font-style: italic;\n}\n\n#ydxlpkhqox .gt_super {\n  font-size: 65%;\n}\n\n#ydxlpkhqox .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\n\n      Name\n      Total Donations1\n      Avg Donations1\n      Total Donors\n      Largest Donation1\n    Adopt a Trucker\n    \nFully Public\n$69,844\n$67\n1,042\n$6,186\nFirst Name Public\n$47,485\n$51\n924\n$920\nLast Name Public\n$35,934\n$70\n510\n$3,130\nPseudonymous\n$69,616\n$55\n1,273\n$3,069\nAnonymous\n$201,879\n$54\n3,720\n$6,145Freedom Convoy 2022\n    \nFully Public\n$1,295,743\n$106\n12,244\n$90,000\nFirst Name Public\n$747,376\n$77\n9,740\n$2,500\nLast Name Public\n$658,672\n$105\n6,265\n$25,000\nPseudonymous\n$1,609,304\n$100\n16,047\n$215,000\nAnonymous\n$4,103,344\n$85\n48,505\n$75,000Total\n      —\n      $8,839,198\n      —\n      100,270\n      —\n    \n        \n          1\n          All currency values (USD) rounded to the nearest dollar\n          \n      \n    \n\nHeader\nNow we can get started on a header. For this, I’ll be including some extra information about when the most recent and earliest donations were. I’ll also make the campaign groups pop more by bolding them.\n\n\noldest_donation <- min(GSG_data$relative_date)\n\nyoungest_donation <- max(GSG_data$relative_date)\n\ntime_interval <- paste(\n    month(oldest_donation, label = TRUE, abbr = FALSE),\n    \" \", day(oldest_donation),\"th \",hour(oldest_donation),\n    \":\", minute(oldest_donation), \" — \",\n    month(youngest_donation, label = TRUE, abbr = FALSE),\n    \" \",day(youngest_donation),\"th \", hour(youngest_donation),\n    \":\",minute(youngest_donation),sep = \"\"\n)\n\ndonations_table <- donations_table |>\n  tab_header(\n    title = md(\"**GiveSendGo Convoy Donations**\"),\n    subtitle = time_interval \n  ) |>\n    tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_row_groups()\n  )\n\n\n\n\n\n\nConclusion\nAnd with that, we have a beautiful, reproducible table done entirely in R.\n\n\n\n",
    "preview": "posts/2022-03-03-beautiful-tables-with-gt/beautiful-tables-with-gt_files/figure-html5/unnamed-chunk-10-1.png",
    "last_modified": "2022-03-03T19:02:24-05:00",
    "input_file": "beautiful-tables-with-gt.knit.md",
    "preview_width": 1369,
    "preview_height": 1217
  },
  {
    "path": "posts/2022-03-03-jcr-p-values/",
    "title": "JCR P-Values",
    "description": "A short exercise in extracting p values from academic papers.",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-03",
    "categories": [],
    "contents": "\nRequired Packages\n\n\nlibrary(pdftools)\nlibrary(tidyverse)\nlibrary(ggthemes)\nlibrary(ggtext)\nlibrary(ggpubr)\n\n\n\nExtract P Values\nThe code chunk below extracts the P values from papers in the following way:\nGet the names of all papers in a folder containing them\nLoop through each paper name and use the pdftools package to extract their raw text\nDo some basic cleaning (e.g. getting rid of “\\n”, which denote paragraph breaks)\nExtract all strings of text that are preceded by \"P >\", \"P <\", \"P =\", and which end in a closed bracket \")\"\nOutput a data frame with 2 columns: P values and Paper Name\n\n\nfiles <- list.files(\"PDFs\")\n\nResults <- data.frame(matrix(ncol = 2, nrow = 0))\nnames(Results) <- c(\"P_Value\", \"Paper\")\n\nfor (i in 1:length(files)) {\n  name <- files[i]\n  \n  text <-\n    pdf_text(\n        here::here(\"_posts\", \"2022-03-03-jcr-p-values\", \"PDFs\", name)\n    )\n  text <- gsub(\"\\n\", \"\", text)\n  text <- gsub(\"  \", \"\", text)\n  \n  values <-\n    unlist(str_extract_all(text, 'p\\\\s?[=<>]\\\\s?\\\\.\\\\d{1,4}')) |>\n    as.data.frame() |>\n    mutate(Paper = name)\n  \n  if (is_empty(values)) {\n    next\n  } else{\n    names(values) <- c(\"P_Value\", \"Paper\")\n    \n    Results <- rbind(values, Results)\n  }\n}\n\n\n\nCleaning\nNow that I have every P value, I need to extract the actual number. This is moderately challenging - P values are often reported without the leading 0 (e.g. p = .07), and a p value that is reported as greater than 0.05 is different from one that is equal to or less than, and those differences need to be recorded somewhere for any future work I may do.\nIn summary, what the below code does is:\nExtract the “raw numeric value” from each reported p value string\nReplace the prior “p [<=>]” with a “0” instead\nConvert this column to numeric\n\n\nCleaned_Results <- Results |>\n  mutate(\n    Raw_Value = P_Value,\n    Raw_Value = gsub(\"p < \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p = \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p > \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p >\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p =\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p <\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p< \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p= \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p> \", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p<\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p=\", \"0\", Raw_Value),\n    Raw_Value = gsub(\"p>\", \"0\", Raw_Value)\n  ) |>\n  mutate(Operator = str_extract(P_Value, \"[=<>]\"))\n\nCleaned_Results$Raw_Value <- as.numeric(Cleaned_Results$Raw_Value)\n\n\n\nPlotting\nFinally, I wanted to plot the raw p values I’ve found. There’s little analytic code here - mostly just ggplot aesthetic wrangling. I used the {ggthemes} package for R to get the theme_fivethirtyeight function which gives me a lot of aesthetic power, for lack of a better term.\nI’ve added X axis breaks at the standard p value thresholds - 0.1, 0.05, 0.01, 0.001. We should expect that there is significant clustering around these thresholds, as most researchers seem to report inequalities (p < x) rather than exact values.\nFinally, p values aren’t exactly linear in their distribution, so everything is put on a log scale for easier interpretation.\n\n\nggplot(Cleaned_Results, aes(x = Raw_Value)) +\n    geom_histogram(bins = 50, fill = \"black\") +\n    scale_x_log10(\n        breaks = c(0.0001, 0.001, 0.01, 0.05, 0.1, 1),\n        labels = c(\".0001\", \".001\", \".01\", \".05\", \".1\", \"1\")\n    ) +\n    theme_pubclean() +\n    theme(\n        axis.title.x = element_text(),\n        axis.title.y = element_text(),\n        plot.title = element_markdown(),\n        plot.background = element_rect(\n            colour = \"black\",\n            fill = NA,\n            size = 2\n        )\n    ) +\n    labs(\n        title = \"<span style = 'color: #ed713a;'>Distribution of P Values<\/span>\",\n        subtitle = \"Appearing in JCR, 2019-2020 editions\",\n        x = \"P Values\",\n        y = \"Count\"\n    )\n\n\n\n\n\n\n\n",
    "preview": "posts/2022-03-03-jcr-p-values/jcr-p-values_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2022-03-03T11:00:56-05:00",
    "input_file": {},
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome!",
    "description": "Welcome to my new blog!",
    "author": [
      {
        "name": "Ethan Milne",
        "url": "https://approachingsignificance.com"
      }
    ],
    "date": "2022-03-02",
    "categories": [],
    "contents": "\nWelcome to my new blog!\n\n\n\n",
    "preview": {},
    "last_modified": "2022-03-02T22:18:58-05:00",
    "input_file": {}
  }
]
